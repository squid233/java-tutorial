# 浮点数

我们知道，两个整数除不尽时，Java 会丢掉小数部分。如何表示小数呢？答案是使用**浮点数**（Floating point）。

Java 中有两种浮点数，分别是`float`和`double`，即单精度浮点数和双精度浮点数。`float`精确到小数点后6~7位，`double`精确到小数点后15~16位。一般情况下使用`float`即可。数学计算可考虑`double`。

浮点数的四则运算与整数的相同，这里不再重复。

## 精度问题

我们来看这个问题：假设你有0.1元，现在增加了0.2元，请问你现在有多少元？

很明显，你现在有0.3元，用 Java 计算，就是`0.1 + 0.2`。把这条表达式输入 JShell，结果如下：

```
jshell> 0.1 + 0.2
$1 ==> 0.30000000000000004
```

很明显你多了`0.00000000000000004`元。这是因为 Java 中的浮点数严格遵循 IEEE 754 标准，所以存在精度问题。

/// admonition | 注意
    type: warning
**绝对不**允许用浮点数计算货币！
///

## 类型转换

浮点数和整数之间可互相转换。整数能直接转换成浮点数，浮点数转换成整数则需要显式声明：

```
(int) 4.2
```

显式转换直接丢弃小数部分。

## 除零

浮点数除以零不会出错，而是变为特殊值。

```text
0.0  / 0.0 = NaN
1.0  / 0.0 = Infinity
-1.0 / 0.0 = -Infinity
```

0除以0不等于任何数，即`NaN`。正数除以0为正无穷大，负数除以0为负无穷大。

## 浮点数的其他写法

- 十进制：`float`的后缀为`f`或`F`；`double`的后缀为`d`或`D`且可省略。
- 科学记数法：`1.2e-10`，其中`1.2`为底数，`-10`为指数，即1.2×10<sup>-10</sup>。`e`不区分大小写，指数符号可为正或负，为正时可省略。
- 十六进制写法较为复杂，这里不作解释。
